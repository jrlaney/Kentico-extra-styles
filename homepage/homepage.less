@import '../settings.less';


//new components
// @import '../_new-components/components-and-expansions/anchor-link-grid.less';
@import '../_new-components/components-and-expansions/background-color-filters.less';
@import '../_new-components/components-and-expansions/blockquote.less';
//@import '../_new-components/components-and-expansions/button-with-flag.less';
@import '../_new-components/components-and-expansions/device-mockups-isometric.less';
@import '../_new-components/components-and-expansions/hypercard-graphic.less';
// @import '../_new-components/components-and-expansions/number-group.less';
@import '../_new-components/components-and-expansions/offpage-image.less';
// @import '../_new-components/components-and-expansions/popup-window-multiple-sizes.less';
// @import '../_new-components/components-and-expansions/triangle-group.less';
// @import '../_new-components/components-and-expansions/video-embedded-reveal.less';

//resets and fixes
// @import '../../_new-components/resets-and-fixes/form-spacing.less';
@import '../_new-components/resets-and-fixes/related-items.less';
// @import '../../_new-components/resets-and-fixes/vertical-panelstack.less';

//new sections and heros
// @import '../_new-components/sections-and-heros/hero-banner-single-angle.less';
// @import '../_new-components/sections-and-heros/section-content-between.less';

//new sliders
// @import '../../_new-components/sliders/center-mode-image.less';
//@import '../_new-components/sliders/customer-success-logo-video.less';
// @import '../../_new-components/sliders/multi-item-nav.less';
// @import '../../_new-components/sliders/photos.less';





//rectangle slick dots
// .slick-dots {
//     margin-top:20px;
//     li button {
//         border-radius:0;
//         width:50px; height:auto;
//         padding:15px 0;
//         background-color:transparent!important;
//         &:after {
//             content:'';
//             display:block;
//             background-color:@iron;
//             width:100%; height:5px;
//             .single-transition;
//         }
//     }
//     li.slick-active button:after {background-color:@red; height:10px;}
// }

//.stacked-mockups {position:relative;}

//new devices and colors, modified to reduce image size
.device-mockup {
    .screen {z-index:2;}
    //isometrics
    &.isometric-macbook-pro {background-image: url('/getmedia/0eb03735-81f4-4631-b170-462f4500c1bd/macbook-pro-isometric_white?width=300');}
    &.isometric-mac-monitor {background-image: url('/getmedia/6ac11f50-cb40-4541-a903-2cb459c2e9c3/mac-monitor-isometric_white?width=600');}
    &.isometric-ipad {background-image: url('/getmedia/c252b2cf-61e4-4977-ae88-1edba813db6f/ipad-isometric_white?width=400');}
    &.isometric-ipad-tilted {background-image: url('/getmedia/5a7c04e0-9652-4148-b828-558bd46759a8/ipad-isometric-tilted_white?width=400');}
    &.isometric-ipad-portrait {background-image: url('/getmedia/fee58bf2-a876-4cab-983f-7d5ea200a6bd/ipad-portrait-isometric_white?width=600');}
    &.isometric-iphone {
        background-image: url('/getmedia/2b9bb02a-2440-4766-9606-84db8b4465c6/iphone-x-isometric_white?width=300');
        .screen:before {background-image: url('/getmedia/4bf610a6-eb4b-4800-b3c6-241a22c161eb/iphoneX-status-bar_white?width=200');}
    }
}




//special world hero
#world-2020-hero {
    background-color:@pure-black;
    overflow:hidden;
    color:@white;
    > .flex-row, .grid-item, [class*="col-"] {position:relative; z-index:2;}
    padding:60px 0;
    @media @medium {padding:80px 0;}
    @media @large {padding:120px 0;}

    .world-iris {
        position:absolute; z-index:0;
        padding-bottom:100%;
        width:475%;
        top:-15%; left:50%;
        .transform(translate(-50%, 0));
        @media @medium {
            width:375%;
            top:-20%;
        }
        @media @large {
            width:315%;
            top:50%;
            .transform(translate(-50%, -50%));
        }
        @media @xlarge {
            width:275%;
        }
        .iris-layer {
            position:absolute; z-index:0;
            max-width:none;
            top:50%; left:50%;
            .transform-origin(top,left);
            .transform(translate(-50%, -50%));
            &.first {
                z-index:0;
                width:100%;
                .animation(continual-rotate 600s linear 0s 1);
            }
            &.second {
                z-index:1;
                width:48.85%;
                border-radius:50%;
                box-shadow:0 0 10px fade(@pure-black, 50%);
                .animation(continual-rotate 400s linear -50s 2);
            }
            &.third {
                z-index:2;
                width:40.76%;
                border-radius:50%;
                box-shadow:0 0 10px fade(@pure-black, 50%);
                .animation(continual-rotate 270s linear -100s 3);
            }
            &.fourth {
                z-index:1;
                width:24.66%;
                border-radius:50%;
                box-shadow:inset 0 0 10px fade(@pure-black, 50%);
                .animation(continual-rotate 200s linear 0s 3);
            }
        }
    }
}

.countdown-wrapper {
    display:block;
    position:relative;
    z-index:2;
    background-color:fade(@pure-black, 75%);
    padding-bottom:20px;
    @media @medium {background-color:transparent;}

    .time-block {
        display:inline-block;
        padding:0 25px;
        width:~"calc(50% - 5px)";
        margin-left:-5px;

        font-family:@myriad-pro;
        font-weight:400;
        font-size:60px;
        color:@white;
        .uppercase;
        text-align:center;
        @media @medium {font-size:70px; width:auto; max-width:~"calc(25% - 5px)"; background-color:fade(@pure-black, 75%);}
        @media @large {font-size:90px;}

        span {
            display:block;
            margin-top:5px;

            font-size:16px;
            color:@white;
            font-weight:600;
        }
        // &:nth-child(2) {color:@orange;}
        // &:nth-child(3) {color:@green;}
        // &:nth-child(4) {color:@blue;}
    }
}





//time for each hypercard in hero mac
@card-animation-time: 10s;


//for the new homepage
section#page-hero {
	position:relative; z-index:0;
    padding-top:0; padding-bottom:0;
    .hero-copy {
		position:relative;
		color:@white;
		padding:45px 20px;
		@media @medium {padding-top:80px; padding-bottom:80px;}
		@media @large {padding-top:120px; padding-bottom:120px;}
		.background-image {
		    position:absolute; z-index:-1;
		    height:~"calc(100% + 15px)";
		    width:100vw;
		    bottom:0; left:0;
			@media @medium {
			    left:100%;
			    .translateX(-50%);
			}
			@media @large {
				left:86%;
			}
		}
    }
    .cards {
        display:block; margin:0;
        margin-top:-40px;
        padding:20px;
        @media @medium {
            margin-top:-50px;
            width:90%;
        }
        @media @large {width:80%;}
    }
    .stacked-mockups {
        position:relative;
		margin-top:30px;
        padding-bottom:10%;
        .macbook-pro {
            position:relative; z-index:0;
            width:150%; float:left;
            margin-left:-8%;
        }
        .iphone-x {
            position:absolute; z-index:1;
            width:30%;
            top:30%; left:5%;
        }
		@media @medium {
            margin-top:80px;
            .macbook-pro {
                width:170%;
                margin-left:-15%;
            }
            .iphone-x {
                width:35%;
                left:0;
            }
        }
		@media @large {
            margin-top:120px;
            .macbook-pro {
                width:215%;
                margin-left:-22%;
            }
            .iphone-x {
                width:45%;
                top:32%;
            }
        }
		@media @xlarge {
            .iphone-x {
                left:-7%;
            }
        }
    }
    #hypercard-slide {
        position:relative;
        .cursor {
            position:absolute; z-index:2;
            width:15px;
            top:50%; left:50%;
            .transition(all 0.1s linear 0.5s);
        }
        .hypercard-img {
            opacity:0;
            position:absolute;
            width:25%;
            top:22%; left:25%;
        }
        &.slick-current {
            .cursor {.transition(all 0.6s ease 0s); top:16%; left:27%;}
            .hypercard-img {.animation(fade-slide-down 0.2s ease-out 0.8s normal forwards);}
        }
    }
    .cards .card.world-card {
        background-color:@pure-black;
        color:@white;
        overflow:hidden;
        > section {
            z-index:2;
            @media @large {padding:50px 15% 50px 30px;}
        }
        .card-description {color:@white; font-size:18px;}
        &:after {
            content:'';
            position:absolute; z-index:1;
            height:100%; width:100%;
            top:0; left:0;
            background-color:fade(@pure-black, 40%);
            .single-transition;
        }
        &:hover:after {background-color:fade(@pure-black, 20%);}
        .world-iris {
            position:absolute; z-index:0;
            top:7%; left:90%;
            width:250%;
            @media @large {width:200%;}
            padding-bottom:100%;
            .transform(translate(-50%, -50%));
            .iris-layer {
                position:absolute; z-index:0;
                max-width:none;
                top:50%; left:50%;
                .transform-origin(top,left);
                .transform(translate(-50%, -50%));
                &.first {
                    z-index:0;
                    width:100%;
                    .animation(continual-rotate 500s linear 0s infinite);
                    //.animation(stutter-rotate 35s linear 0s infinite);
                }
                &.second {
                    z-index:1;
                    width:49%;
                    border-radius:50%;
                    box-shadow:0 0 10px fade(@pure-black, 50%);
                    .animation(continual-rotate 280s linear -50s infinite);
                    //.animation(stutter-rotate 25s linear 0s infinite);
                }
                &.third {
                    z-index:2;
                    width:41%;
                    border-radius:50%;
                    box-shadow:0 0 10px fade(@pure-black, 50%);
                    .animation(continual-rotate 140s linear -100s infinite);
                    //.animation(stutter-rotate 15s linear 0s infinite);
                }
                &.fourth {
                    z-index:1;
                    width:25%;
                    border-radius:50%;
                    box-shadow:inset 0 0 10px fade(@pure-black, 50%);
                    .animation(continual-rotate 70s linear 0s infinite);
                    //.animation(stutter-rotate 10s linear -0s infinite);
                }
            }
        }
    }
}



#features {
	blockquote {
		overflow:hidden;
		background-color:@light-gray;
		padding:20px 15px 15px 20px;
		&:before {top:5px; left:5px;}
		&:after {display:none;}
		> footer {
			margin-top:10px;
			font-size:12px; line-height:14px;
			.name {
				display:block;
				margin-bottom:5px;
				text-transform:none;
				font-size:20px; line-height:22px;
				letter-spacing:normal;
			}
		}
	}
	> section {
		position:relative;
		padding-left:25px;
		> .flex-row {position:relative; z-index:1;}
		&:before, &:after {content:''; position:absolute; z-index:0;}
		&:before {
			left:10px; top:60px;
			height:0; width:0;
			background-color:@red;
			border-radius:50%;
			.transition(all 0.3s @ease-in-end-bounce 0.8s);
		}
		&:after {
			left:0; top:0;
			margin-left:21px;
			height:0; width:4px;
			background-color:@red;
			.transition(height 0.7s ease-in 0.2s);
		}
		&.passed-view {
			&:before{height:25px; width:25px;}
			&:after{height:100%;}
			.isometric-diagram {
				&:before{height:25px; width:25px;}
				&:after{width:~"calc(15% + 12px)";}
			}
		}
		@media @medium {
			padding-left:0;
			&:before {left:50%; top:50%; .translate(-50%, -50%);}
			&:after {left:50%; margin-left:-2px;}
		}
		@media @large {
			&.passed-view {
				&:before{height:60px; width:60px;}
			}
		}
	}
	.isometric-diagram {
		position:relative;
		width:100%;
		padding-bottom:56%;
		.diagram-item {position:absolute; z-index:0;}
		&:before, &:after {content:''; position:absolute; z-index:0;}
		&:before {
			left:15%; top:50%;
			.translateY(-50%);
			height:0; width:0;
			background-color:@red;
			border-radius:50%;
			.transition(all 0.2s @ease-in-end-bounce 1.1s);
		}
		&:after {
			left:0; top:50%;
			margin-top:-2px;
			height:4px; width:0;
			background-color:@red;
			.transition(width 0.2s ease-in 1s);
		}
	}
	#features-headline {
		padding-left:0;
		&:before {
			z-index:1;
			left:50%; top:100%;
			.translate(-50%, -50%);
			background-color:@white;
			 border:5px solid @red;
			.transition-delay(0.2s);
		}
		&:after {
			height:4px; width:0;
			left:auto; right:50%; top:100%;
			margin-top:-2px;
			.transform-origin(center, right);
			.transition(width 0.5s ease-in 0.2s);
			@media @medium {display:none;}
		}
		&.passed-view {
			&:before {height:40px; width:40px;}
			&:after {width:~"calc(50% - 21px)";}
		}
	}
	#analyze .isometric-diagram {
		padding-bottom:61%;
		.isometric-macbook-pro {
			z-index:1;
			width:48%;
			bottom:0; left:16%;
		}
		.isometric-mac-monitor {
			width:39.5%;
			top:0; left:54%;
		}
	}
	#mobilize .isometric-diagram {
		padding-bottom:64%;
		@media @medium {
			&:before {left:auto; right:15%;}
			&:after {left:auto; right:0;}
		}
		.isometric-ipad {
			width:54%;
			top:0; left:24%;
		}
		.isometric-ipad-portrait {
			width:54%;
			top:50%; left:32%;
		}
		.isometric-iphone {
			width:33%;
			top:44%; left:18%;
			&.right-side {
				top:27%; left:66%;
				@media @medium {top:31%; left:4%;}
			}
		}
	}
	#realize .isometric-diagram {
		padding-bottom:91%;
		.isometric-ipad {
			width:49%;
			top:68%; left:5%;
		}
		.echo-dot-comp {
			z-index:1;
			width:28%;
			top:30%; left:25%;
			&:before {
				content:'';
				padding-top:120%;
				display:block; position:relative;
			}
			.speech-bubble {
				position:absolute;
				top:0; left:35%;
				height:18%; width:70%;
				.transform(rotateX(54.7deg) rotateZ(45deg) skew(45deg));
				.transform-origin(top, left);
                background-color:@iron;

                &:before {
					content:'';
					position:absolute;
                    top:~"calc(100% - 2px)"; left:15%;
                    border-left:0 solid transparent;
                    border-top:18px solid @iron;
                    border-right:18px solid transparent;
                }
				&.blue {
                	background-color:@blue;
					top:30%; left:51%;
					&:before {border-top-color:@blue;}
				}
			}
			.device {
				position:absolute;
				width:68%;
				bottom:0; left:0;
				&:after {
	                content:'';
	                position:absolute; z-index:0;
	                border:1px solid red;
	                height:69%; width:100%;
	                bottom:0;
	                left:0;
	                border-radius:50%;
	                background-color:fade(@pure-black, 30%);
	                box-shadow:15px 15px 20px fade(@pure-black, 30%);
				}
			}
		}
		.isometric-iphone {
			width:27%;
			top:60%; left:39%;
		}
		.card-device-comp {
			z-index:1;
			width:46%;
			top:45%; left:51%;
			.hypercard-img {
				position:absolute; z-index:5;
				width:23%;
				.transform-origin(top, left);
	            -webkit-transform-style:flat; transform-style:flat;
				.transform(rotateX(54.7deg) rotateZ(45deg) skew(45deg) translateX(200%) translateY(-40%) translateZ(0));
				box-shadow:5px 5px 7px fade(@pure-black, 30%);
				top:0; left:0;
				&:nth-child(2) {.transform(rotateX(54.7deg) rotateZ(45deg) skew(45deg) translateX(340%) translateY(5%) translateZ(0));}
				&:nth-child(3) {.transform(rotateX(54.7deg) rotateZ(45deg) skew(45deg) translateX(470%) translateY(-115%) translateZ(0));}
			}
			.device-mockup {
				position:relative;
				z-index:1;
				width:100%;
			}
		}
		.isometric-mac-monitor {
			width:41%;
			top:0; left:44%;
		}
	}
	#intelligent-enterprise {
		padding-left:0;
		&:before {
			height:4px; width:0;
			left:21px; top:0;
			margin-top:-2px;
			border-radius:0;
			.transition(width 0.5s ease-in 0s);
			@media @medium {display:none;}
		}
		&:after {
			left:50%;
			margin-left:-2px;
			.transition(height 0.2s ease-in 0.5s);
		}
		&.passed-view{
			&:before {width:~"calc(50% - 19px)";}
			&:after {
				height:55px;
				@media @medium {height:80px;}
			}
		}
	}
}
#why-microstrategy {
	.slick-slider {
		padding-left:40px; padding-right:40px;
		@media @large {padding-left:0px; padding-right:0px;}
		.slick-slide {
			.flex-direction(column);
			> * {max-width:100%;}
		}
	}
	.ratio {width:250px;}
}













//keyframes for the entire page
@import '../_new-components/components-and-expansions/keyframes-basic-animate-on-scroll.less';


.keyframes(card-animation-cursor-loop;{
	0%      {top:45%; left:73%;}
	13%     {top:12%; left:30%;}
	33.333% {top:12%; left:30%;}
	46.333% {top:40%; left:55%;}
	66.666% {top:40%; left:55%;}
	79.666% {top:45%; left:73%;}
	100%    {top:45%; left:73%;}
});
.keyframes(card-appear-below;{
	0%   {opacity:0; .translate(0, -20%);}
	13%  {opacity:0; .translate(0, -20%);}
	15%  {opacity:1; .translate(0, 0);}
	35%  {opacity:1; .translate(0, 0);}
	37%  {opacity:0; .translate(0, -20%);}
	100% {opacity:0; .translate(0, -20%);}
});
.keyframes(card-appear-left;{
	0%   {opacity:0; .translate(20%, 0);}
	13%  {opacity:0; .translate(20%, 0);}
	15%  {opacity:1; .translate(0, 0);}
	35%  {opacity:1; .translate(0, 0);}
	37%  {opacity:0; .translate(20%, 0);}
	100% {opacity:0; .translate(20%, 0);}
});


.keyframes(continual-rotate;{
	0%   {.transform(rotate(0deg) translate(-50%, -50%));}
	100%  {.transform(rotate(360deg) translate(-50%, -50%));}
});
